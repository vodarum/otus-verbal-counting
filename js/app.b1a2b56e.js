(function(){"use strict";var e={5797:function(e,t,a){var n=a(5102),i=a(9269);const s={class:"layout"},r={class:"container"};function m(e,t,a,n,m,o){const l=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",r,[(0,i.Wm)(l)])])}const o=e=>[e.getFullYear(),`0${e.getMonth()+1}`.slice(-2),`0${e.getDate()}`.slice(-2)].join("-"),l="verbalCounting",c=()=>({settings:{complexity:1,duration:1,mathOperations:[],withNegative:!1},statistics:{trainingDayNumber:1,lastTrainingDate:o(new Date),lastResult:{completed:0,total:0},accuracy:0}}),u=()=>{const e=localStorage.getItem(l);return e?JSON.parse(e):c()},p=({settings:e,statistics:t})=>{localStorage.setItem(l,JSON.stringify({settings:e,statistics:t}))};var d=a(6957);const g=Symbol(),x=()=>(0,d.oR)(g),v=(0,d.MT)({state:()=>({complexityLevels:{exponentiation:[{base:{min:2,max:4},exp:{min:1,max:3}},{base:{min:4,max:6},exp:{min:1,max:3}},{base:{min:6,max:8},exp:{min:1,max:3}},{base:{min:8,max:10},exp:{min:1,max:3}},{base:{min:2,max:4},exp:{min:3,max:5}},{base:{min:4,max:6},exp:{min:3,max:5}},{base:{min:6,max:8},exp:{min:3,max:4}},{base:{min:8,max:10},exp:{min:3,max:4}},{base:{min:10,max:13},exp:{min:2,max:4}},{base:{min:13,max:15},exp:{min:2,max:4}}],simple:[[{min:1,max:5},{min:1,max:5}],[{min:1,max:9},{min:5,max:10}],[{min:10,max:50},{min:10,max:50}],[{min:10,max:50},{min:50,max:99}],[{min:10,max:99},{min:100,max:999}],[{min:100,max:999},{min:100,max:999}],[{min:10,max:99},{min:10,max:99},{min:100,max:999}],[{min:10,max:99},{min:10,max:499},{min:100,max:999}],[{min:10,max:499},{min:100,max:999},{min:100,max:999}],[{min:100,max:999},{min:100,max:999},{min:100,max:999}]],difficult:[[{min:1,max:5},{min:1,max:9}],[{min:6,max:9},{min:1,max:9}],[{min:10,max:50},{min:1,max:5}],[{min:51,max:99},{min:1,max:5}],[{min:10,max:99},{min:6,max:9}],[{min:100,max:499},{min:2,max:5}],[{min:100,max:499},{min:6,max:9}],[{min:1,max:9},{min:10,max:30},{min:10,max:30}],[{min:5,max:9},{min:5,max:9},{min:100,max:500}],[{min:5,max:9},{min:10,max:99},{min:50,max:99}]]},settingsLimits:{complexity:{min:1,max:10},duration:{min:1,max:15},mathOperations:[{key:"sum",name:"Суммирование"},{key:"diff",name:"Разность"},{key:"multi",name:"Умножение"},{key:"div",name:"Деление"},{key:"exp",name:"Возведение в степень"}]},settings:{complexity:1,duration:1,mathOperations:[],withNegative:!1},statistics:{trainingDayNumber:1,lastTrainingDate:"2023-06-23",lastResult:{completed:0,total:0},accuracy:0}}),getters:{validateSettings:e=>!e.settings.mathOperations.length},mutations:{setSettings:(e,t)=>{e.settings={...e.settings,...t}},setStatistics:(e,t)=>{e.statistics={...e.statistics,...t}}},actions:{initStore:({dispatch:e})=>{const t=u();e("saveSettings",t.settings),e("saveStatistics",t.statistics)},saveSettings:({commit:e},t)=>{e("setSettings",t)},saveStatistics:({commit:e,state:t},a)=>{const n=o(new Date),{trainingDayNumber:i,lastTrainingDate:s}={...t.statistics,...a};e("setStatistics",n!==s?{...a,trainingDayNumber:i+1,lastTrainingDate:n}:a)}}});var f={name:"LayoutDefault",setup:()=>{v.dispatch("initStore")}},y=a(7617);const h=(0,y.Z)(f,[["render",m],["__scopeId","data-v-6b16bf9a"]]);var b=h,_=a(2201);const k={class:"home"};function w(e,t,a,n,s,r){const m=(0,i.up)("GameStatistics"),o=(0,i.up)("GameSettings"),l=(0,i.up)("q-btn");return(0,i.wg)(),(0,i.iD)("div",k,[(0,i.Wm)(m),(0,i.Wm)(o,{style:{margin:"40px 0"}}),(0,i.Wm)(l,{color:"secondary",label:"Играть",disable:e.validateSettings,onClick:e.goToGame},null,8,["disable","onClick"])])}var S=a(3201);const D=e=>((0,i.dD)("data-v-4ec76e14"),e=e(),(0,i.Cn)(),e),O={class:"settings"},I=D((()=>(0,i._)("p",{class:"settings__title"},"Настройки",-1))),C={class:"settings__item slider"},N={class:"slider__title"},F={class:"settings__item slider"},T={class:"slider__title"},G={class:"settings__item column"},L={class:"settings__item"};function M(e,t,a,n,s,r){const m=(0,i.up)("q-slider"),o=(0,i.up)("q-checkbox");return(0,i.wg)(),(0,i.iD)("div",O,[I,(0,i._)("div",C,[(0,i._)("p",N,"Длительность "+(0,S.zw)(e.duration)+" мин.",1),(0,i.Wm)(m,{modelValue:e.duration,"onUpdate:modelValue":t[0]||(t[0]=t=>e.duration=t),markers:"","marker-labels":e.durationMarkers,min:e.durationLimits.min,max:e.durationLimits.max,color:"teal"},null,8,["modelValue","marker-labels","min","max"])]),(0,i._)("div",F,[(0,i._)("p",T,"Сложность "+(0,S.zw)(e.complexity),1),(0,i.Wm)(m,{modelValue:e.complexity,"onUpdate:modelValue":t[1]||(t[1]=t=>e.complexity=t),markers:"","marker-labels":e.complexityMarkers,min:e.complexityLimits.min,max:e.complexityLimits.max,color:"teal"},null,8,["modelValue","marker-labels","min","max"])]),(0,i._)("div",G,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.mathOperationsLimits,(a=>((0,i.wg)(),(0,i.j4)(o,{key:a.key,val:a.key,label:a.name,modelValue:e.mathOperations,"onUpdate:modelValue":t[2]||(t[2]=t=>e.mathOperations=t),color:"teal"},null,8,["val","label","modelValue"])))),128))]),(0,i._)("div",L,[(0,i.Wm)(o,{label:"Использовать отрицательные",modelValue:e.withNegative,"onUpdate:modelValue":t[3]||(t[3]=t=>e.withNegative=t),color:"teal"},null,8,["modelValue"])])])}var Z=(0,i.aZ)({name:"GameSettings",setup:()=>{const{state:e,dispatch:t}=x(),{complexity:a,duration:n,mathOperations:s}=(0,i.Fl)((()=>e.settingsLimits)).value;return{complexityLimits:a,durationLimits:n,mathOperationsLimits:s,complexity:(0,i.Fl)({get:()=>e.settings.complexity,set:e=>t("saveSettings",{complexity:e})}),duration:(0,i.Fl)({get:()=>e.settings.duration,set:e=>t("saveSettings",{duration:e})}),mathOperations:(0,i.Fl)({get:()=>e.settings.mathOperations,set:e=>t("saveSettings",{mathOperations:e})}),withNegative:(0,i.Fl)({get:()=>e.settings.withNegative,set:e=>t("saveSettings",{withNegative:e})}),complexityMarkers:[{value:a.min,label:a.min},{value:a.max,label:a.max}],durationMarkers:[{value:n.min,label:n.min},{value:n.max,label:n.max}]}}}),W=a(3925),V=a(9109),H=a(1410),j=a.n(H);const q=(0,y.Z)(Z,[["render",M],["__scopeId","data-v-4ec76e14"]]);var $=q;j()(Z,"components",{QSlider:W.Z,QCheckbox:V.Z});const z=e=>((0,i.dD)("data-v-65a53b38"),e=e(),(0,i.Cn)(),e),R={class:"statistics"},K=z((()=>(0,i._)("p",{class:"statistics__title"},"Статистика",-1))),Y={class:"statistics__text"},P={class:"statistics__text"},Q={class:"statistics__text"};function U(e,t,a,n,s,r){return(0,i.wg)(),(0,i.iD)("div",R,[K,(0,i._)("p",Y," Добро пожаловать на "+(0,S.zw)(e.trainingDayNumber)+" тренировочный день! ",1),(0,i._)("p",P," Ваш последний результат: решено "+(0,S.zw)(e.lastResult.completed)+" из "+(0,S.zw)(e.lastResult.total)+". ",1),(0,i._)("p",Q,"Общая точность: "+(0,S.zw)(e.accuracy)+"%.",1)])}var B=(0,i.aZ)({name:"GameStatistics",setup:()=>{const{state:e}=x(),{trainingDayNumber:t,lastResult:a,accuracy:n}=(0,i.Fl)((()=>e.statistics)).value;return{trainingDayNumber:t,lastResult:a,accuracy:n}}});const J=(0,y.Z)(B,[["render",U],["__scopeId","data-v-65a53b38"]]);var A=J,E=(0,i.aZ)({name:"HomeView",components:{GameSettings:$,GameStatistics:A},setup:()=>{const{state:e,getters:t}=x();return{goToGame:()=>{p(e),Ve.replace({path:"/game"})},validateSettings:(0,i.Fl)((()=>t.validateSettings))}}}),X=a(147);const ee=(0,y.Z)(E,[["render",w],["__scopeId","data-v-688a9d7f"]]);var te=ee;j()(E,"components",{QBtn:X.Z});const ae=e=>((0,i.dD)("data-v-7a0239b4"),e=e(),(0,i.Cn)(),e),ne={class:"game"},ie={class:"game__header"},se={key:0,class:"game__over"},re=ae((()=>(0,i._)("span",null,"Игра окончена!",-1))),me={class:"game__keyboard keyboard"},oe={class:"keyboard__row keyboard__row_special"},le={class:"keyboard__row keyboard__row_number"};function ce(e,t,a,n,s,r){const m=(0,i.up)("q-btn"),o=(0,i.up)("GameTimer"),l=(0,i.up)("GameField");return(0,i.wg)(),(0,i.iD)("div",ne,[(0,i._)("div",ie,[(0,i.Wm)(m,{color:"red-5",glossy:"",icon:"close",label:"Отмена",onClick:t[0]||(t[0]=t=>e.$router.replace({path:"/"}))}),(0,i.Wm)(o,{duration:e.duration,onFinishTimer:e.finishGame},null,8,["duration","onFinishTimer"])]),e.gameOver?((0,i.wg)(),(0,i.iD)("div",se,[re,(0,i.Wm)(m,{class:"game__refresh",color:"secondary",label:"Заново",onClick:t[1]||(t[1]=t=>e.$router.go(0))})])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Wm)(l,(0,i.dG)({class:["game__field",{"bg-green-12":e.gameFieldCheck.isCorrect,"bg-deep-orange-12":e.gameFieldCheck.isIncorrect}]},e.gameField),null,16,["class"]),(0,i._)("div",me,[(0,i._)("div",oe,[(0,i.Wm)(m,{color:"secondary",icon:"backspace",onClick:e.remove},null,8,["onClick"]),(0,i.Wm)(m,{color:"secondary",icon:"horizontal_rule",onClick:t[2]||(t[2]=t=>e.pressKey("-"))}),(0,i.Wm)(m,{color:"green-5",icon:"check",onClick:e.accept},null,8,["onClick"])]),(0,i._)("div",le,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(9,(t=>(0,i.Wm)(m,{key:t,color:"secondary",label:t,onClick:a=>e.pressKey(t)},null,8,["label","onClick"]))),64)),(0,i.Wm)(m,{color:"secondary",label:0,onClick:t[3]||(t[3]=t=>e.pressKey(0))})])])],64))])}var ue=a(6237);const pe={class:"timer"};function de(e,t,a,n,s,r){return(0,i.wg)(),(0,i.iD)("span",pe,(0,S.zw)(e.timer),1)}var ge=(0,i.aZ)({name:"GameTimer",props:{duration:{type:Number,required:!0}},emit:{finishTimer:null},setup:(e,{emit:t})=>{const a=(0,ue.iH)(60*e.duration),n=(0,ue.iH)(`${e.duration<10?"0"+e.duration:e.duration}:00`),s=setInterval((()=>{0===a.value&&(clearInterval(s),t("finishTimer")),a.value-=1;const e=a.value/60,i=Math.trunc(e);let r=Math.round(60*(e-i));r=r>0?r:0,n.value=`${i<10?"0"+i:i}:${r<10?"0"+r:r}`}),1e3);return(0,i.Ah)((()=>{clearInterval(s)})),{timer:n}}});const xe=(0,y.Z)(ge,[["render",de],["__scopeId","data-v-72d06a55"]]);var ve=xe;const fe=["innerHTML"];function ye(e,t,a,n,s,r){return(0,i.wg)(),(0,i.iD)("div",{innerHTML:e.task,ref:"gameField"},null,8,fe)}var he=(0,i.aZ)({name:"GameField",props:{content:{type:String,required:!0},fakeInput:{type:String,required:!0}},setup:e=>{const t=(0,ue.iH)(e.content),a=(0,ue.iH)(null),n=()=>a.value,s=()=>n().querySelector(".fake-input");return(0,i.YP)((()=>e.content),(e=>{t.value=e.replace("?","<span class='fake-input'></span>")})),(0,i.YP)((()=>e.fakeInput),(e=>{s().innerHTML=e})),{task:t,gameField:a}}});const be=(0,y.Z)(he,[["render",ye]]);var _e=be;function ke(e){return"number"===typeof e?Math.trunc(100*+Math.random().toFixed(e)):Math.floor(Math.random()*(e.max-e.min+1))+e.min}const we=()=>!!ke({min:0,max:1}),Se=(e,{complexity:t,withNegative:a})=>{let n=e[t-1].map((e=>ke(e)));return a&&(n=n.map((e=>we()?-e:e))),n},De=(e,t)=>{const a=Se(e,t),n=a.reduce(((e,t)=>e+t));return{numbers:[...a,n],sign:"+"}},Oe=(e,t)=>{const a=Se(e,t),n=a.reduce(((e,t)=>e+t));return{numbers:[n,...a],sign:"-"}},Ie=(e,t)=>{const a=Se(e,t),n=a.reduce(((e,t)=>e*t));return{numbers:[...a,n],sign:"*"}},Ce=(e,t)=>{const a=Se(e,t),n=a.reduce(((e,t)=>e*t));return{numbers:[n,...a],sign:"/"}},Ne=(e,{complexity:t,withNegative:a})=>{const{base:n,exp:i}=e[t-1],[s,r]=[a&&we()?-ke(n):ke(n),ke(i)],m=s**r;return{numbers:[s,r,m],sign:"^"}},Fe=()=>({numbers:[],sign:"="}),Te=({complexityLevels:e,settings:t})=>{const{complexity:a,mathOperations:n,withNegative:i}=t,s=n[Math.floor(Math.random()*n.length)];switch(s){case"sum":return De(e.simple,{complexity:a,withNegative:i});case"diff":return Oe(e.simple,{complexity:a,withNegative:i});case"multi":return Ie(e.difficult,{complexity:a,withNegative:i});case"div":return Ce(e.difficult,{complexity:a,withNegative:i});case"exp":return Ne(e.exponentiation,{complexity:a,withNegative:i});default:return Fe()}};var Ge=(0,i.aZ)({name:"GameView",components:{GameTimer:ve,GameField:_e},setup:()=>{const{state:e,getters:t,dispatch:a}=x();t.validateSettings&&Ve.replace({path:"/"});const{complexityLevels:n,settings:s}=e,r=(0,ue.iH)(!1),m=(0,ue.qj)({content:"",fakeInput:""}),o=(0,ue.qj)({isCorrect:!1,isIncorrect:!1}),l={correct:0,incorrect:0};let c;const u=()=>+m.fakeInput===c,d=e=>{"-"===e?m.fakeInput="-"===m.fakeInput[0]?m.fakeInput.slice(1):`-${m.fakeInput}`:m.fakeInput+=e},g=()=>{m.fakeInput=m.fakeInput.slice(0,-1)},v=()=>{u()?(l.correct++,f("isCorrect").then((()=>y()))):(l.incorrect++,f("isIncorrect").then((()=>y())))},f=e=>new Promise((t=>{o[e]=!0,setTimeout((()=>{o[e]=!1,t()}),300)})),y=()=>{const{numbers:e,sign:t}=Te({complexityLevels:n,settings:s});if(0===e.length)return;const a=ke({min:0,max:e.length-1}),i=e.map(((e,t)=>t===a?"?":e)),r=i.pop();c=e[a],m.content=i.join(` ${t} `)+` = ${r}`,m.fakeInput=""},h=async()=>{const t=l.correct+l.incorrect;await a("saveStatistics",{lastResult:{completed:l.correct,total:t},accuracy:(l.correct/t*100).toFixed(2)}),p(e),r.value=!0};return(0,i.bv)((()=>{y()})),{duration:s.duration,gameOver:r,gameField:m,gameFieldCheck:o,accept:v,remove:g,pressKey:d,finishGame:h}}});const Le=(0,y.Z)(Ge,[["render",ce],["__scopeId","data-v-7a0239b4"]]);var Me=Le;j()(Ge,"components",{QBtn:X.Z});const Ze=[{path:"/",name:"home",component:te},{path:"/game",name:"game",component:Me}],We=(0,_.p7)({history:(0,_.r5)("/otus-verbal-counting/"),routes:Ze});var Ve=We,He=a(7871),je={config:{},plugins:{}};(0,n.ri)(b).use(He.Z,je).use(v,g).use(Ve).mount("#app")}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,s){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],s=e[c][2];for(var m=!0,o=0;o<n.length;o++)(!1&s||r>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[o])}))?n.splice(o--,1):(m=!1,s<r&&(r=s));if(m){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,i,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,r=n[0],m=n[1],o=n[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(i in m)a.o(m,i)&&(a.m[i]=m[i]);if(o)var c=o(a)}for(t&&t(n);l<r.length;l++)s=r[l],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},n=self["webpackChunkotus_verbal_counting"]=self["webpackChunkotus_verbal_counting"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(5797)}));n=a.O(n)})();
//# sourceMappingURL=app.b1a2b56e.js.map